<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
    <link
      href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css"
      rel="stylesheet"
    />
    <script type="text/javascript" src="env.js"></script>
  </head>

  <body>
    <main role="main" class="container-fluid">
      <div id="cesiumContainer"></div>
    </main>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.85/Build/Cesium/Cesium.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"
      type="text/javascript"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
    <script>
      $(document).ready(function () {
        Cesium.Ion.defaultAccessToken = TOKEN;
        var clock = new Cesium.Clock({
          currentTime: Cesium.JulianDate.fromIso8601("1900-01-01"),
          clockStep: Cesium.ClockStep.SYSTEM_CLOCK_MULTIPLIER,
          multiplier: 0, // how much time to advance each SYSTEM CLOCK tick
          shouldAnimate: false,
        });
        const viewer = new Cesium.Viewer("cesiumContainer", {
          infoBox: false,
          selectionIndicator: false,
          shadows: true,
          shouldAnimate: true,
        });
      });

      function createModel(sat, height) {
        viewer.entities.removeAll();

        const position = Cesium.Cartesian3.fromDegrees(
          -123.0744619,
          44.0503706,
          50000
        );
        const heading = Cesium.Math.toRadians(135);
        const pitch = 0;
        const roll = 0;
        const hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll);
        const orientation = Cesium.Transforms.headingPitchRollQuaternion(
          position,
          hpr
        );
        const resource = Cesium.IonResource.fromAssetId(1591963);
        const entity = viewer.entities.add({
          name: sat,
          position: position,
          orientation: orientation,
          model: {
            uri: resource,
            minimumPixelSize: 128,
            maximumScale: 200,
          },
        });
        viewer.trackedEntity = entity;
      }
    </script>
  </body>
</html>
