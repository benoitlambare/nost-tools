<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
    <link
      href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css"
      rel="stylesheet"
    />
    <script type="text/javascript" src="env.js"></script>
  </head>

  <body>
    <main role="main" class="container-fluid">
      <div id="cesiumContainer" class="fullSize"></div>
      <div id="loadingOverlay">
        <h1>Loading...</h1>
      </div>
      <div id="toolbar"></div>
    </main>

    <script>
      // Grant CesiumJS access to your ion assets
      Cesium.Ion.defaultAccessToken = TOKEN;

      // Initialize Cesium viewer
      var viewer = new Cesium.Viewer("cesiumContainer");
      var clock = new Cesium.Clock({
        currentTime: Cesium.JulianDate.fromIso8601("1900-01-01"),
        clockStep: Cesium.ClockStep.SYSTEM_CLOCK_MULTIPLIER,
        multiplier: 0, // how much time to advance each SYSTEM CLOCK tick
        shouldAnimate: false,
      });

      // Create box entity
      var boxEntity = viewer.entities.add({
        name: "Rotating Box",
        position: Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883, 100),
        box: {
          dimensions: new Cesium.Cartesian3(4000.0, 3000.0, 5000.0),
          material: Cesium.Color.RED.withAlpha(0.5),
        },
        orientation: Cesium.Quaternion.IDENTITY,
      });

      // Set up rotation animation
      var axis = new Cesium.Cartesian3(0, 1, 0);
      var angle = Cesium.Math.toRadians(10);
      var time = 0;
      var rotating = viewer.clock.onTick.addEventListener(function (clock) {
        time += clock.deltaTime;
        var angleIncr = (angle * time) / 1000; // Rotate at 30 degrees per second
        var rotation = Cesium.Quaternion.fromAxisAngle(axis, angleIncr);
        boxEntity.orientation = Cesium.Quaternion.multiply(
          boxEntity.orientation,
          rotation,
          new Cesium.Quaternion()
        );
      });

      // Zoom to the box entity
      viewer.zoomTo(boxEntity);
    </script>
  </body>
</html>
