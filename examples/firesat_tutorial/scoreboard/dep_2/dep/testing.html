<!DOCTYPE html>
<html>
  <head>
    <script type="module">
      import { AMQPWebSocketClient } from './js/amqp-websocket-client.mjs';
      // const url = "wss://localhost/ws/amqp";
      const url = `wss://${window.location.host}`
      // const url = `wss://localhost:7000/ws/amqp`
      const amqp = new AMQPWebSocketClient(url, "/", "rabbit_admin", "rabbit_admin");

      async function start() {
        try {
          const conn = await amqp.connect();
          console.log("Connected to AMQP server successfully");
        } catch (err) {
          console.error("Error connecting to AMQP server:", err);
          setTimeout(start, 1000); // Retry connection after 1 second
        }
      }

      start();
    </script>
  </head>
  <body>
  </body>
</html>
